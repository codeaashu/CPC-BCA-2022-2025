<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search Results | TravelHub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0..1,0" />

<link rel="stylesheet" href="./assets/css/style.css">
<script src="./assets/js/generic.js" defer></script>
  <link rel="icon" href="./assets/images/favicon.ico" type="image/x-icon">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f3f4f6;
      /* padding: 20px; */
    }

    h1 {
      text-align: center;
      color: #0D3166;
      margin-bottom: 30px;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(48%, 1fr));
      gap: 20px;
      width: 100%;
      max-width: 1200px;
      margin: auto;
    }

    .hotel-card {
      background-color: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
    }

    .hotel-img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .hotel-content {
      padding: 20px;
    }

    .hotel-name {
      font-size: 22px;
      font-weight: bold;
      color: #0D3166;
      margin-bottom: 5px;
    }

    .hotel-location {
      font-size: 15px;
      color: #555;
      margin-bottom: 10px;
    }

    .hotel-description {
      font-size: 14px;
      color: #444;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .hotel-info {
      font-size: 14px;
      margin-bottom: 8px;
    }

    .price {
      font-weight: bold;
      color: green;
    }

    .amenities {
      margin-top: 10px;
    }

    .amenity {
      background-color: #0D3166;
      color: white;
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 12px;
      margin: 2px 6px 2px 0;
      display: inline-block;
    }

    .view-button {
      margin-top: 15px;
      display: inline-block;
      background-color: #0D3166;
      color: white;
      padding: 10px 18px;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    .view-button:hover {
      background-color: #092448;
    }

    @media (max-width: 768px) {
      .grid-container {
        grid-template-columns: 1fr;
      }
    }
    .hotel-listing {
  height: 160px;
  background-color: #0D3166;
  color: white;
  margin-bottom: 20px;
}
.hotel-listing-header {
  
  padding-top: 100px;
  font-size: 2.6em;
  font-weight: bold;
  text-align: center;
  color: white;
}
.dummy {
  height: 20px;
}
  </style>
</head>
<body>
    <header class="header active" data-header>
        <div class="container">
            <a href="./index.html" class="logo">
               <img src="./assets/images/logo.png" alt="logo" width="190" height="28"> 
            </a>
            <nav class="navbar" data-navbar>

                <ul class="navbar-list">
                    <li>
                        <a href="./index.html" class="navbar-link label-medium">Home</a>
                    </li>
                    <li>
                        <a href="./listings.html" class="navbar-link label-medium">Listings</a>
                    </li>
                    <li>
                        <a href="./reviews.html" class="navbar-link label-medium">Reviews</a>
                    </li>
                    <li>
                        <a href="./about.html" class="navbar-link label-medium">About</a>
                    </li>
                    <li>
                        <a href="./complaint.html" class="navbar-link label-medium">Raise a Complaint</a>
                    </li>

                </ul>

                <div class="navbar-wrapper" id="navbarUserSection">
                </div>
            </nav>
            <button class="nav-toggle-btn icon-btn " aria-label="toggle navbar" data-nav-toggler>
                <span class="material-symbols-rounded open" aria-hidden="true">menu</span>
                <span class="material-symbols-rounded close" aria-hidden="true">close</span>
            </button>
            
        </div>
    </header>
  <div class="hotel-listing">

    <h1 class="hotel-listing-header">Search Results</h1>
  </div>

  <div class="grid-container" id="hotelResults">
    <p>Loading hotels...</p>
  </div>
  <p class="dummy"></p>
       <footer class="footer">
        <div class="footer-top">
            <div class="container">
                <div class="footer-brand">
                    <a href="#" class="logo">
                        <img src="./assets/images/logo.png" width="190" height="28" alt="Estateviata">
                    </a>
                    <p class="body-medium footer-brand">
                        If you're looking for a place
                             where you can be yourself, 
                             don't give up. Keep searching 
                             until you find a place that
                              feels like home.

                    </p>
                </div>
                <nav class="footer-nav" aria-labelledby="nav-label-1">
                    <p class="title-small footer-list-title" id="nav-label-1">Quick link</p>
                    <ul class="footer-list">
                        <li>
                            <a href="#" class="body-medium footer-link">Home</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">Listings</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">Reviews</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">Search</a>
                        </li>
                    </ul>
                </nav>

                <nav class="footer-nav" aria-labelledby="nav-label-2">
                    <p class="title-small footer-list-title" id="nav-label-2">Support</p>
                    <ul class="footer-list">
                        <li>
                            <a href="#" class="body-medium footer-link">About us</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">contact us</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">Privacy Policy</a>
                        </li>
                        <li>
                            <a href="#" class="body-medium footer-link">Terms & Conditions</a>
                        </li>
                    </ul>
                </nav>

                <nav class="footer-nav" aria-labelledby="nav-label-3">
                    <p class="title-small footer-list-title" id="nav-label-3">Support</p>
                    <ul class="footer-list">
                        <li>
                            <a href="#" class="body-medium footer-link">hello@travelhub.com</a>
                        </li>
                        <li>
                            <address class="address body-medium">
                                814150 Sarwan Rd. Deoghar, Jharkhand
                            </address>
                        </li>
                        <li>
                            <ul class="social-list">
                                <li>
                                    <a href="#" class="social-link">
                                        <img src="./assets/images/facebook.svg" alt="facebook">
                                    </a>
                                </li>

                                <li>
                                    <a href="#" class="social-link">
                                        <img src="./assets/images/twitter.svg" alt="twitter">
                                    </a>
                                </li>

                                <li>
                                    <a href="#" class="social-link">
                                        <img src="./assets/images/insta.svg" alt="instagram">
                                    </a>
                                </li>
                            </ul>
                        </li>

                    </ul>
                </nav>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="container">
                <p class="copyright body-medium">
                    &copy; copyright 2025 De-Coder-Pritam
                </p>
            </div>
        </div>
     </footer>

  <!-- Location Required Modal -->
<div id="locationModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; width:100vw; height:100vh; background:rgba(13,49,102,0.25); backdrop-filter:blur(4px); z-index:2000; align-items:center; justify-content:center;">
  <div style="background:#fff; border-radius:16px; box-shadow:0 8px 40px rgba(13,49,102,0.18); padding:40px 50px; min-width:320px; display:flex; flex-direction:column; align-items:center; font-size:1.25rem; text-align:center;">
    <div style="margin-bottom:24px; color:#0D3166; font-weight:bold;">Please enter a location to search.</div>
    <button id="locationModalOkBtn" style="padding:12px 32px; background:#0D3166; color:#fff; border:none; border-radius:6px; font-size:1rem; cursor:pointer;">OK</button>
  </div>
</div>

<!-- Modal for location or no hotels found -->
<div id="infoModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; width:100vw; height:100vh; background:rgba(13,49,102,0.25); backdrop-filter:blur(4px); z-index:2000; align-items:center; justify-content:center;">
  <div style="background:#fff; border-radius:22px; box-shadow:0 12px 48px rgba(13,49,102,0.22); padding:60px 70px; min-width:420px; min-height:180px; display:flex; flex-direction:column; align-items:center; font-size:2rem; text-align:center;">
    <div id="infoModalMsg" style="margin-bottom:36px; color:#0D3166; font-weight:bold; font-size:2rem;"></div>
    <button id="infoModalOkBtn" style="padding:18px 48px; background:#0D3166; color:#fff; border:none; border-radius:8px; font-size:1.3rem; cursor:pointer;">OK</button>
  </div>
</div>

  <script>
    const container = document.getElementById("hotelResults");
const urlParams = new URLSearchParams(window.location.search);
const Givenlocation = urlParams.get("location");
const locValue = Givenlocation ? Givenlocation.charAt(0).toUpperCase() + Givenlocation.slice(1) : "";

const infoModal = document.getElementById("infoModal");
const infoModalMsg = document.getElementById("infoModalMsg");
const infoModalOkBtn = document.getElementById("infoModalOkBtn");

function showModalAndRedirect(message) {
  infoModalMsg.textContent = message;
  infoModal.style.display = "flex";
  document.body.style.overflow = "hidden";
  infoModalOkBtn.onclick = function() {
    window.location.href = "./index.html";
  };
}

if (!Givenlocation) {
  showModalAndRedirect("Please enter a location to search.");
} else {
  fetch(`http://127.0.0.1:9999/api/hotels/search?location=${locValue}`)
    .then(res => res.json())
    .then(hotels => {
      if (!hotels.length) {
        showModalAndRedirect(`No hotels found in ${Givenlocation}.`);
        return;
      }

      container.innerHTML = ""; // Clear default text

      hotels.forEach(hotel => {
        const card = document.createElement("div");
        card.className = "hotel-card";
        card.innerHTML = `
          <img src="assets/images/${hotel.id}.jpeg" alt="${hotel.name}" class="hotel-img" />
          <div class="hotel-content">
            <div class="hotel-name">${hotel.name}</div>
            <div class="hotel-location">üìç ${hotel.location}</div>
            <div class="hotel-description">${hotel.description}</div>
            <div class="hotel-info"><strong>Total Rooms:</strong> ${hotel.totalRooms}</div>
            <div class="hotel-info price">‚Çπ${hotel.pricePerNight} / night</div>
            <div class="amenities">
              ${hotel.amenities.map(item => `<span class="amenity">${item}</span>`).join("")}
            </div>
            <a href="hotelDetails.html?id=${hotel.id}" class="view-button">View</a>
          </div>
        `;
        container.appendChild(card);
      });
    })
    .catch(error => {
      console.error("Error fetching hotels:", error);
      container.innerHTML = `<p style="color:red;">Failed to load hotels. Please try again later.</p>`;
    });
}
    // Location modal logic
    const locationModal = document.getElementById("locationModal");
    const locationModalOkBtn = document.getElementById("locationModalOkBtn");

    if (!Givenlocation) {
      locationModal.style.display = "flex";
    }

    locationModalOkBtn.addEventListener("click", () => {
      locationModal.style.display = "none";
    });

    // Info modal logic
    infoModalOkBtn.addEventListener("click", () => {
      infoModal.style.display = "none";
      window.location.href = "./index.html";
    });
  </script>
</body>
</html>
